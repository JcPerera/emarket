<!--
  Generated template for the Users page.

  See http://ionicframework.com/docs/v2/components/#navigation for more info on
  Ionic pages and navigation.
-->
<ion-header>
  <ion-navbar color="primary">
    <button ion-button menuToggle>
      <ion-icon name="menu"></ion-icon>
    </button>
    <ion-title>User Profile</ion-title>
  </ion-navbar>
</ion-header>


<ion-content padding>
  <div padding>
    <ion-segment [(ngModel)]="user">
      <ion-segment-button value="profile">
        Profile
      </ion-segment-button>
      <ion-segment-button value="posts">
        Posts
      </ion-segment-button>
    </ion-segment>
  </div>

  <div [ngSwitch]="user">
    <ion-list *ngSwitchCase="'profile'" id="top-container">
      <div>
        <ion-card>
          <ion-item>
            <img class="avatar" src="{{userProfile.photo}}">
            <h2 align="center">{{userProfile.username}}</h2>
            <h2 *ngIf="!visible" align="center">{{userProfile.name}}</h2>
          </ion-item>
        </ion-card>
        <ion-row>
          <ion-col>
            <button ion-button icon-left outline (click)="goToChat()">
        <ion-icon name="chatboxes"></ion-icon>
        <div>Chat</div>
      </button>
          </ion-col>
          <ion-col>

          </ion-col>
          <ion-col>
            <button ion-button icon-left outline (click)="goToDeliveryForm()">
        <ion-icon name="car"></ion-icon>
        <div>Delivery</div>
      </button>
          </ion-col>
        </ion-row>
        <div id="rating" align="center">
          <rating disabled [(ngModel)]="avg" readOnly="false" max="5" emptyStarIconName="star-outline" halfStarIconName="star-half"
            starIconName="star" nullable="false" (ngModelChange)="onModelChange($event)">
          </rating>
        </div>
        <div>
          <ion-card *ngFor="let item of ratingComments">
            <ion-item>
              <ion-avatar item-left>
                <img src="{{item.photo}}">
              </ion-avatar>
              <h2>{{item.name}}</h2>
            </ion-item>
            <ion-card-content>
              <p>{{item.comment}}</p>
            </ion-card-content>
          </ion-card>
        </div>
      </div>
      <ion-item id="textarea">
        <ion-input type="text" [(ngModel)]="comment" placeholder="Type Your Message"></ion-input>
        <button ion-button outline item-right (click)="rateComment()">
      Send
    </button>
      </ion-item>

    </ion-list>

    <ion-list *ngSwitchCase="'posts'" id="rightContainer">
      <ion-list>
        <ion-card *ngFor="let post of userPostsLists">
          <ion-item>
            <ion-avatar item-left>
              <img src="{{userProfile.photo}}">
            </ion-avatar>
            <h2>{{userProfile.username}}</h2>
            <h2 *ngIf="!visible">{{userProfile.name}}</h2>
            
          </ion-item>
          <img src="{{post.postPhoto}}">
          <ion-item>
            <h1>{{post.title}}</h1>
            <h2>{{post.category}}</h2>
            <p>{{post.subCategory}}</p>
          </ion-item>
          <ion-card-content>
            <p>{{post.body}}</p>
          </ion-card-content>
          <button ion-button icon-left clear small (click)="goToComments(post)">
        <ion-icon name="text"></ion-icon>
        <div>Comments</div>
      </button>
        </ion-card>
      </ion-list>
    </ion-list>
  </div>
</ion-content>